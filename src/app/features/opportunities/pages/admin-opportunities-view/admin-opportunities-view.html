<app-cards-page-layout
  [pageTitle]="'opportunity.list.title' | translate"
  [pageSubTitle]="'opportunity.list.subtitle' | translate"
  pageTitleClass="text-[24px] font-semibold"
  pageSubTitleClass="text-md text-gray-600"
>
  <ng-container ngProjectAs="page-actions">
    <p-button
      [label]="'opportunity.wizard.addOpportunity' | translate"
      severity="primary"
      class="flex-1"
      fluid
      icon="icon-plus"
      (onClick)="onAddOpportunity()"
    />
  </ng-container>
  <ng-container ngProjectAs="page-filters">
    <app-admin-opportunities-filter
      [(filter)]="filter"
      (filterChange)="applyFilter()"
    />
  </ng-container>
  <ng-container ngProjectAs="page-body">
    <app-cards-skeleton [isLoading]="adminOpportunitiesStore.isLoading()">
      <app-data-cards
        [items]="adminOpportunitiesStore.list()"
        [totalRecords]="adminOpportunitiesStore.count()"
        [(filter)]="filter"
        (filterChange)="applyFilter()"
      >
        <ng-template
          #itemsTemplate
          let-item="item"
        >
          <app-admin-opportunity-card
            [opportunity]="item"
            (onViewDetails)="onViewDetails($event)"
            (onAction)="onAction($event)"
          />
        </ng-template>
      </app-data-cards>
    </app-cards-skeleton>
  </ng-container>
</app-cards-page-layout>

<app-create-edit-opportunity-dialog [(visible)]="createEditOpportunityDialogVisible" />