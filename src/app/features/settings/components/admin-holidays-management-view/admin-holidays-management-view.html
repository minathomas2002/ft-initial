<div>
  <app-table-layout>
    <ng-container ngProjectAs="table-filters">
      <app-holidays-management-filter></app-holidays-management-filter>
    </ng-container>

    <ng-container ngProjectAs="table-body">
      <app-table-skeleton
        [headers]="headers()"
        [isLoading]="adminSettingsStore.isLoading()"
      >
        <app-data-table
          [columns]="headers()"
          [rows]="adminSettingsStore.holidaysList()"
          [(filter)]="filter"
          [totalRecords]="adminSettingsStore.holidaysTotalCount()"
          (filterChange)="onSuccessActions()"
        >
          <ng-template
            #itemsTemplate
            let-item="item"
          >
            <td>
              {{ item.name }}
            </td>

            <td>
              {{ holidaysTypeMapper.getTypeLabel(item.typeId) }}
            </td>

            <td>
              {{ item.dateFrom| date : 'dd MMM yyyy' }}
            </td>

            <td>
              {{item.dateTo | date : 'dd MMM yyyy'}}
            </td>

            <td>
              {{ (item.numberOfDays)? (item.numberOfDays + ' ' + ('common.days' | translate)) : '-' }}
            </td>
            <td>
              {{ item.createdDate | date : 'dd MMM yyyy' }}
            </td>
            <td>
              {{item.createdBy}}
            </td>
            <td>
              @if(item.updatedDate){
              {{ item.updatedDate | date : 'dd MMM yyyy' }}
              }@else{
              <div class="text-center">-</div>
              }
            </td>
            <td>
              @if(item.updatedBy){
              {{ item.updatedBy }}
              }@else{
              <div class="text-center">-</div>
              }
            </td>

            <!-- Action -->
            <td>
              <app-admin-setting-menu-action
                [holidayRecord]="item"
                (onDelete)="onDelete(item)"
                (onEdit)="onUpdate(item)"
              ></app-admin-setting-menu-action>
            </td>
          </ng-template>
        </app-data-table>
      </app-table-skeleton>
    </ng-container>
  </app-table-layout>

  @if(viewUpdateDialog()){
  <app-add-edit-holiday-dialog
    [(dialogVisible)]="viewUpdateDialog"
    (onSuccess)="onSuccessActions()"
    [isEditMode]="isEditMode()"
    [holidayRecord]="selectedItem()?? null"
  ></app-add-edit-holiday-dialog>
  }

  <app-general-confirmation-dialog
    [(visible)]="viewDeleteDialog"
    (onConfirm)="confirmDelete()"
    [confirmButtonSeverity]="'danger'"
    [icon]="'icon-trash-2'"
    [title]="'setting.adminView.holidays.dialog.deleteTitle' | translate"
    [description]="'setting.adminView.holidays.dialog.deleteDescription' | translate"
    (confirmed)="confirmDelete()"
    [confirmationLabel]="'setting.adminView.holidays.actions.delete' | translate"
  ></app-general-confirmation-dialog>

</div>