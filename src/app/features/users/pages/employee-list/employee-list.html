<app-table-layout tableTitle="Employees" tableSubTitle="Manage employee roles and permissions">
    <ng-container ngProjectAs="table-filters">
        <app-users-filter></app-users-filter>
    </ng-container>

    <ng-container ngProjectAs="table-body">
        <app-table-skeleton [headers]="headers()" [isLoading]="usersStore.loading()">
            <app-data-table [columns]="headers()" [rows]="rows()" [(filter)]="filterService.filter"
                [totalRecords]="totalRecords()" (filterChange)="filterService.applyFilterWithPaging()"
                messageTitle="No Assessment Cycle Available">
                <ng-template #itemsTemplate let-item="item">
                    <!-- Employee ID -->
                    <td>
                        {{item.employeeID}}
                    </td>

                    <!-- Employee arabic name -->
                    <td>
                        {{item.name_Ar}}
                    </td>

                    <!-- Employee Eng name  -->
                    <td>
                        {{item.name_En}}
                    </td>

                    <!-- Employee Email -->
                    <td>
                        <p class="text-sm text-gray-600 max-w-[200px] truncate" [pTooltip]="item.email"
                            tooltipPosition="top" [innerHTML]="item.email"> </p>
                    </td>

                    <td>
                        {{item.phoneNumber}}
                    </td>

                    <!-- Role -->
                    <td>
                        {{getUserTranslatedRole(item.role)}}
                    </td>

                    <!-- Role -->
                    <td>
                        {{item.joinDate | date : "dd/MM/yyyy"}}
                    </td>

                    <!-- Assessment Status -->
                    <td>
                        @let status = getUserStatus(item.status);
                        <app-base-tag [color]="status.color" [value]="status.title" />
                    </td>
                    <!-- Action -->
                    <td>
                        @if(item.actions.length>0){
                        <app-users-action-menu [actions]="item.actions" (onChangeRole)="onChangeRole(item)"
                            (onDelete)="onDelete(item)"></app-users-action-menu>
                        }@else{
                        <div class="text-center">-</div>
                        }
                    </td>
                </ng-template>
            </app-data-table>
        </app-table-skeleton>
    </ng-container>
</app-table-layout>

<app-change-role-dialog [(visible)]="changeRoleDialogVisible"
    (onConfirm)="onChangeRoleConfirm()"></app-change-role-dialog>

<app-general-confirmation-dialog [(visible)]="deleteDialogVisible" (onConfirm)="onDeleteConfirm()"
    [icon]="'icon-trash-2'" [title]="'Delete User'" [description]="'Are you sure you want to delete this user?'"
    (confirmed)="onDeleteConfirm()"></app-general-confirmation-dialog>