<p-dialog
  [(visible)]="visible"
  [modal]="true"
  [resizable]="false"
  (onHide)="onClose.emit()"
  (onShow)="onShow.emit()"
  [styleClass]="'w-full !max-h-full h-full !p-0'"
  [pt]="pt"
>
  <ng-template #header>
    <div class="inline-flex items-center w-[440px] bg-gray-50 ps-5 pt-6 border-e-1 border-gray-200">
      <img
        src="assets/images/long-logo.svg"
        alt="logo"
        class="w-[156px]"
      >
    </div>
  </ng-template>
  <div class="flex h-full">
    <div class="steps-container w-[440px] bg-gray-50 ps-5 py-6  border-e-1 border-gray-200">
      <div class="flex flex-col h-full bg-gray-50">
        <p-stepper
          [(value)]="activeStep"
          [linear]="true"
          class="bg-gray-50 basis-[10rem]"
        >
          @for (step of steps(); track step.title; let i = $index) {
          <p-step-item [value]="i + 1">
            <p-step
              [value]="i + 1"
              class="flex flex-row flex-auto gap-2"
            >
              <ng-template
                #content
                let-activateCallback="activateCallback"
                let-value="value"
              >
                <button
                  class="bg-transparent border-0 inline-flex flex-col gap-2"
                  (click)="activateCallback()"
                >
                  <div class="flex items-center gap-4">
                    <span class="p-step-number flex items-center justify-center">
                      @if(step.isValid && activeStep() !== i + 1){
                      <i class="icon-check-circle text-primary-600"></i>
                      }@else {
                      <i
                        class="rounded-full w-[10px] h-[10px]"
                        [ngClass]="{'
                          bg-white': activeStep() === i + 1,
                          'bg-gray-400': activeStep() !== i + 1,
                        }"
                      ></i>
                      }
                    </span>
                    <div class="flex flex-col items-start">
                      <h3
                        class="text-md font-semibold"
                        [ngClass]="{'text-primary-600': activeStep() === i + 1}"
                      >{{step.title}}</h3>
                      <h4
                        class="text-sm"
                        [ngClass]="{'text-primary-400': activeStep() === i + 1}"
                      >
                        {{step.description}}
                      </h4>
                    </div>
                  </div>

                </button>
              </ng-template>
            </p-step>
            @if(i !== steps().length - 1){
            <p-step-panel>
              <ng-template
                #content
                let-activateCallback="activateCallback"
              >
                <div class="h-[70px]">
                </div>
              </ng-template>
            </p-step-panel>
            }
          </p-step-item>
          }
        </p-stepper>
      </div>
    </div>
    <div class="flex flex-col flex-1">
      <div class="flex-1">
        <p-scrollpanel [style]="{ width: '100%', height:'500px' }">
          @for (step of steps(); track step.title; let i = $index) {
          @if (activeStep() === i + 1) {
          @for (content of stepContents(); track content.stepNumber) {
          @if (content.stepNumber === i + 1) {
          <ng-container *ngTemplateOutlet="content.templateRef"></ng-container>
          }
          }
          }
          }
        </p-scrollpanel>
      </div>
      <div class="actions flex justify-between items-center py-[32px] ps-[1.5rem] p pe-0">
        <div class="flex-1">
          <p-button
            text
            icon="icon-save"
            label="Save a draft"
            severity="secondary"
          />
        </div>
        <div class="flex gap-4">
          @if (!isFirstStep()) {
          <p-button
            (click)="previousStep()"
            icon="icon-arrow-left"
            label="Back"
          />
          }
          @if (!isFinalStep()) {
          <p-button
            (click)="nextStep()"
            icon="icon-arrow-right"
            label="Next"
            [disabled]="isNextStepDisabled()"
          />
          }
          @if (isFinalStep()) {
          <ng-content select="final-step"></ng-content>
          }
        </div>
      </div>
    </div>
  </div>
</p-dialog>

<!-- <p-step
  [value]="1"
  class="flex flex-row flex-auto gap-2"
>
  <ng-template
    #content
    let-activateCallback="activateCallback"
    let-value="value"
  >
    <button
      class="bg-transparent border-0 inline-flex flex-col gap-2"
      (click)="activateCallback()"
    >
      <div class="flex items-center gap-4">
        <span class="
                                                                                  rounded-full border-2 w-[32px] h-[32px]
                                                                                  flex items-center justify-center p-[1px]
                                                                                  border-primary-700">
          <span class="bg-primary-700 rounded-full text-white flex items-center justify-center w-[24px] h-[24px]">
            <span class="w-[5px] h-[5px] bg-white rounded-full"></span>
          </span>
        </span>
        <div class="flex flex-col items-start">
          <h3
            class="text-md font-semibold"
            [ngClass]="{'text-primary-600': activeStep() === 1}"
          >Opportunity Information</h3>
          <h4
            class="text-sm"
            [ngClass]="{'text-primary-400': activeStep() === 1}"
          >
            Enter Opportunity details
          </h4>
        </div>
      </div>

    </button>
  </ng-template>
</p-step> -->
