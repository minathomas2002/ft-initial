<div class="flex flex-col gap-[32px] pb-10">
  <!-- Overview Section -->
  <div class="flex flex-col gap-4">
    <h2 class="text-lg font-semibold text-gray-900">
      Overview
      <span><i
          class="icon-info text-sm ms-2 text-gray-400"
          tooltipPosition="top"
          [pTooltip]="tooltipContent"
          [tooltipStyleClass]="'min-w-[400px]'"
        ></i>
        <ng-template #tooltipContent>
          <div class="flex flex-col gap-2 text-start">
            <p>
              Please note, supplier is required to complete this template independently for each product intended for localization. However, specifications of the same product should be consolidated.
            </p>
            <p>
              For e.g., If targeted product is "HV Transformer", kindly fill this localization template specifically for "HV Transformer" only and do not include any other product. However all specifications of HV Transformer should be covered as part of the same template.
            </p>
          </div>
        </ng-template>
      </span>
    </h2>

    <div class="flex flex-col gap-4">
      <!-- Product Name -->
      <div class="flex flex-col gap-2">
        <app-base-label
          [title]="'Product Name'"
          [secondaryTitle]="'(i.e. Product Targeted for Localization)'"
        />
        <app-group-input-with-checkbox
          [showCheckbox]="showCheckbox()"
          [hasCommentControl]="getHasCommentControl(overviewFormGroupControls[EMaterialsFormControls.productName])"
          (valueChanged)="upDateSelectedInputs($event, {
            section: 'overview',
            inputKey: 'productName',
            label: 'Product Name'
          })"
        >
          <input
            type="text"
            pInputText
            fluid
            placeholder="Enter product name"
            [maxlength]="100"
            [formControl]="getValueControl(overviewFormGroupControls[EMaterialsFormControls.productName])"
            [appConditionalColorClass]="highlightInput('productName')"
            [color]="selectedInputColor()"
          />
        </app-group-input-with-checkbox>
        <app-base-error-messages
          [control]="getValueControl(overviewFormGroupControls[EMaterialsFormControls.productName])"
          [label]="'Product Name'"
        />
      </div>

      <!-- Product Specifications -->
      <div class="flex flex-col gap-2">
        <app-base-label
          [title]="'Product Specifications'"
          [secondaryTitle]="'(incl. voltage ratings\' targeted for Localization)'"
        />
        <app-group-input-with-checkbox
          [showCheckbox]="showCheckbox()"
          [hasCommentControl]="getHasCommentControl(overviewFormGroupControls[EMaterialsFormControls.productSpecifications])"
          (valueChanged)="upDateSelectedInputs($event, {
            section: 'overview',
            inputKey: 'productSpecifications',
            label: 'Product Specifications'
          })"
        >
          <textarea
            pTextarea
            fluid
            placeholder="Enter product specifications"
            [maxlength]="500"
            [rows]="4"
            [formControl]="getValueControl(overviewFormGroupControls[EMaterialsFormControls.productSpecifications])"
            [appConditionalColorClass]="highlightInput('productSpecifications')"
            [color]="selectedInputColor()"
          ></textarea>
        </app-group-input-with-checkbox>
        <!-- Character Counter -->
        <div class="text-xs text-gray-500 text-right mt-1">
          {{ getValueControl(overviewFormGroupControls[EMaterialsFormControls.productSpecifications]).value?.length || 0 }} / 500
        </div>
        <app-base-error-messages
          [control]="getValueControl(overviewFormGroupControls[EMaterialsFormControls.productSpecifications])"
          [label]="'Product Specifications'"
        />
      </div>

      <div class="flex flex-col gap-4 md:flex-row">
        <!-- Targeted Annual Plant Capacity -->
        <div class="flex flex-col gap-2 flex-1">
          <div>
            <app-base-label
              [title]="'Targeted Annual Plant Capacity'"
              [secondaryTitle]="'(Mention Unit of Measurement)'"
            />
          </div>
          <app-group-input-with-checkbox
            [showCheckbox]="showCheckbox()"
            [hasCommentControl]="getHasCommentControl(overviewFormGroupControls[EMaterialsFormControls.targetedAnnualPlantCapacity])"
            (valueChanged)="upDateSelectedInputs($event, {
              section: 'overview',
              inputKey: 'targetedAnnualPlantCapacity',
              label: 'Targeted Annual Plant Capacity'
            })"
          >
            <input
              type="text"
              pInputText
              fluid
              [maxlength]="50"
              placeholder="Enter targeted annual plant capacity"
              [formControl]="getValueControl(overviewFormGroupControls[EMaterialsFormControls.targetedAnnualPlantCapacity])"
              [appConditionalColorClass]="highlightInput('targetedAnnualPlantCapacity')"
              [color]="selectedInputColor()"
            />
          </app-group-input-with-checkbox>
          <app-base-error-messages
            [control]="getValueControl(overviewFormGroupControls[EMaterialsFormControls.targetedAnnualPlantCapacity])"
            [label]="'Targeted Annual Plant Capacity'"
          />
        </div>

        <!-- Time Required to Setup Factory -->
        <div class="flex flex-col gap-2 flex-1">
          <div>
            <app-base-label
              [title]="'Time Required to Setup Factory'"
              [secondaryTitle]="'(Once Localization Plan is Approved)'"
            />
          </div>
          <app-group-input-with-checkbox
            [showCheckbox]="showCheckbox()"
            [hasCommentControl]="getHasCommentControl(overviewFormGroupControls[EMaterialsFormControls.timeRequiredToSetupFactory])"
            (valueChanged)="upDateSelectedInputs($event, {
              section: 'overview',
              inputKey: 'timeRequiredToSetupFactory',
              label: 'Time Required to Setup Factory'
            })"
          >
            <input
              type="text"
              pInputText
              fluid
              maxlength="50"
              placeholder="Enter time required to setup factory"
              [formControl]="getValueControl(overviewFormGroupControls[EMaterialsFormControls.timeRequiredToSetupFactory])"
              [appConditionalColorClass]="highlightInput('timeRequiredToSetupFactory')"
              [color]="selectedInputColor()"
            />
          </app-group-input-with-checkbox>
          <app-base-error-messages
            [control]="getValueControl(overviewFormGroupControls[EMaterialsFormControls.timeRequiredToSetupFactory])"
            [label]="'Time Required to Setup Factory'"
          />
        </div>
      </div>
    </div>
  </div>

  <!-- Expected CAPEX Investment Section -->
  <div class="flex flex-col gap-4">
    <h2 class="text-lg font-semibold text-gray-900">Expected CAPEX Investment</h2>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
      <!-- Land Percentage -->
      <div class="flex flex-col gap-2">
        <app-base-label
          [title]="'Land'"
          [secondaryTitle]="'(%)'"
        />
        <app-group-input-with-checkbox
          [showCheckbox]="showCheckbox()"
          [hasCommentControl]="getHasCommentControl(expectedCAPEXInvestmentFormGroupControls[EMaterialsFormControls.landPercentage])"
          (valueChanged)="upDateSelectedInputs($event, {
            section: 'expectedCAPEXInvestment',
            inputKey: 'landPercentage',
            label: 'Land'
          })"
        >
          <p-inputnumber
            fluid
            placeholder="Enter land"
            [min]="0"
            mode="decimal"
            [minFractionDigits]="0"
            [maxFractionDigits]="2"
            [maxlength]="5"
            [formControl]="getValueControl(expectedCAPEXInvestmentFormGroupControls[EMaterialsFormControls.landPercentage])"
            [appConditionalColorClass]="highlightInput('landPercentage')"
            [color]="selectedInputColor()"
          />
        </app-group-input-with-checkbox>
        <app-base-error-messages
          [control]="getValueControl(expectedCAPEXInvestmentFormGroupControls[EMaterialsFormControls.landPercentage])"
          [label]="'Land'"
        />
      </div>

      <!-- Building Percentage -->
      <div class="flex flex-col gap-2">
        <app-base-label
          [title]="'Building'"
          [secondaryTitle]="'(%)'"
        />
        <app-group-input-with-checkbox
          [showCheckbox]="showCheckbox()"
          [hasCommentControl]="getHasCommentControl(expectedCAPEXInvestmentFormGroupControls[EMaterialsFormControls.buildingPercentage])"
          (valueChanged)="upDateSelectedInputs($event, {
            section: 'expectedCAPEXInvestment',
            inputKey: 'buildingPercentage',
            label: 'Building'
          })"
        >
          <p-inputnumber
            fluid
            placeholder="Enter building"
            [min]="0"
            mode="decimal"
            [maxlength]="5"
            [minFractionDigits]="0"
            [maxFractionDigits]="2"
            [formControl]="getValueControl(expectedCAPEXInvestmentFormGroupControls[EMaterialsFormControls.buildingPercentage])"
            [appConditionalColorClass]="highlightInput('buildingPercentage')"
            [color]="selectedInputColor()"
          />
        </app-group-input-with-checkbox>
        <app-base-error-messages
          [control]="getValueControl(expectedCAPEXInvestmentFormGroupControls[EMaterialsFormControls.buildingPercentage])"
          [label]="'Building'"
        />
      </div>

      <!-- Machinery / Equipment Percentage -->
      <div class="flex flex-col gap-2">
        <app-base-label
          [title]="'Machinery / Equipment'"
          [secondaryTitle]="'(%)'"
        />
        <app-group-input-with-checkbox
          [showCheckbox]="showCheckbox()"
          [hasCommentControl]="getHasCommentControl(expectedCAPEXInvestmentFormGroupControls[EMaterialsFormControls.machineryEquipmentPercentage])"
          (valueChanged)="upDateSelectedInputs($event, {
            section: 'expectedCAPEXInvestment',
            inputKey: 'machineryEquipmentPercentage',
            label: 'Machinery / Equipment'
          })"
        >
          <p-inputnumber
            fluid
            placeholder="Enter machinery / equipment"
            [min]="0"
            [maxlength]="5"
            mode="decimal"
            [minFractionDigits]="0"
            [maxFractionDigits]="2"
            [formControl]="getValueControl(expectedCAPEXInvestmentFormGroupControls[EMaterialsFormControls.machineryEquipmentPercentage])"
            [appConditionalColorClass]="highlightInput('machineryEquipmentPercentage')"
            [color]="selectedInputColor()"
          />
        </app-group-input-with-checkbox>
        <app-base-error-messages
          [control]="getValueControl(expectedCAPEXInvestmentFormGroupControls[EMaterialsFormControls.machineryEquipmentPercentage])"
          [label]="'Machinery / Equipment'"
        />
      </div>

      <!-- Others Percentage -->
      <div class="flex flex-col gap-2">
        <app-base-label
          [title]="'Others'"
          [secondaryTitle]="'(%) (Kindly mention details)'"
        />
        <app-group-input-with-checkbox
          [showCheckbox]="showCheckbox()"
          [hasCommentControl]="getHasCommentControl(expectedCAPEXInvestmentFormGroupControls[EMaterialsFormControls.othersPercentage])"
          (valueChanged)="upDateSelectedInputs($event, {
            section: 'expectedCAPEXInvestment',
            inputKey: 'othersPercentage',
            label: 'Others'
          })"
        >
          <p-inputnumber
            fluid
            placeholder="Enter others"
            [min]="0"
            [maxlength]="5"
            mode="decimal"
            [minFractionDigits]="0"
            [maxFractionDigits]="2"
            [formControl]="getValueControl(expectedCAPEXInvestmentFormGroupControls[EMaterialsFormControls.othersPercentage])"
            [appConditionalColorClass]="highlightInput('othersPercentage')"
            [color]="selectedInputColor()"
          />
        </app-group-input-with-checkbox>
        <app-base-error-messages
          [control]="getValueControl(expectedCAPEXInvestmentFormGroupControls[EMaterialsFormControls.othersPercentage])"
          [label]="'Others'"
        />
      </div>
    </div>

    <!-- Others Description (conditional) -->
    @if(showOthersDescription()){
    <div class="flex flex-col gap-2">
      <app-base-label [title]="'Others Description'" />
      <app-group-input-with-checkbox
        [showCheckbox]="showCheckbox()"
        [hasCommentControl]="getHasCommentControl(expectedCAPEXInvestmentFormGroupControls[EMaterialsFormControls.othersDescription])"
        (valueChanged)="upDateSelectedInputs($event, {
          section: 'expectedCAPEXInvestment',
          inputKey: 'othersDescription',
          label: 'Others Description'
        })"
      >
        <textarea
          pInputTextarea
          fluid
          [maxlength]="255"
          placeholder="Enter others description"
          [rows]="4"
          [formControl]="getValueControl(expectedCAPEXInvestmentFormGroupControls[EMaterialsFormControls.othersDescription])"
          [appConditionalColorClass]="highlightInput('othersDescription')"
          [color]="selectedInputColor()"
        ></textarea>
      </app-group-input-with-checkbox>
      <!-- Character Counter -->
      <div class="text-xs text-gray-500 text-right mt-1">
        {{ getValueControl(expectedCAPEXInvestmentFormGroupControls[EMaterialsFormControls.othersDescription]).value?.length || 0 }} / 255
      </div>
      <app-base-error-messages
        [control]="getValueControl(expectedCAPEXInvestmentFormGroupControls[EMaterialsFormControls.othersDescription])"
        [label]="'Others Description'"
      />
    </div>
    }
  </div>

  <!-- Target Customers Section -->
  <div class="flex flex-col gap-4">
    <h2 class="text-lg font-semibold text-gray-900">Target Customers</h2>

    <div class="flex flex-col gap-4">
      <!-- Targeted Customer -->
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div class="flex flex-col gap-2 col-span-1">
          <app-base-label [title]="'Targeted Customer'" />
          <app-group-input-with-checkbox
            [showCheckbox]="showCheckbox()"
            [hasCommentControl]="getHasCommentControl(targetCustomersFormGroupControls[EMaterialsFormControls.targetedCustomer])"
            (valueChanged)="upDateSelectedInputs($event, {
              section: 'targetCustomers',
              inputKey: 'targetedCustomer',
              label: 'Targeted Customer'
            })"
          >
            <p-multiselect
              [options]="targetedCustomerOptions()"
              [formControl]="getValueControl(targetCustomersFormGroupControls[EMaterialsFormControls.targetedCustomer])"
              optionLabel="name"
              optionValue="id"
              display="chip"
              dropdownIcon="icon-chevron-down"
              fluid
              [filter]="false"
              placeholder="Select targeted customer"
              [appConditionalColorClass]="highlightInput('targetedCustomer')"
              [color]="selectedInputColor()"
            />
          </app-group-input-with-checkbox>
          <app-base-error-messages
            [control]="getValueControl(targetCustomersFormGroupControls[EMaterialsFormControls.targetedCustomer])"
            [label]="'Targeted Customer'"
          />
        </div>
      </div>

      <!-- Conditional fields for SEC's approved local suppliers -->
      @if(showTargetedSuppliersFields()){
      <div class="flex flex-col gap-4">
        <p class="text-sm text-gray-900 font-semibold">If Targeting "SEC's approved local suppliers", mention the following:</p>

        <!-- Names of Targeted Suppliers -->
        <div class="flex flex-col gap-2">
          <app-base-label [title]="'Provide names of targeted SEC\'s approved local suppliers'" />
          <app-group-input-with-checkbox
            [showCheckbox]="showCheckbox()"
            [hasCommentControl]="getHasCommentControl(targetCustomersFormGroupControls[EMaterialsFormControls.namesOfTargetedSuppliers])"
            (valueChanged)="upDateSelectedInputs($event, {
              section: 'targetCustomers',
              inputKey: 'namesOfTargetedSuppliers',
              label: 'Names of Targeted Suppliers'
            })"
          >
            <textarea
              pInputTextarea
              fluid
              [maxlength]="255"
              placeholder="Enter provide names of targeted SEC's"
              [rows]="4"
              [formControl]="getValueControl(targetCustomersFormGroupControls[EMaterialsFormControls.namesOfTargetedSuppliers])"
              [appConditionalColorClass]="highlightInput('namesOfTargetedSuppliers')"
              [color]="selectedInputColor()"
            ></textarea>
          </app-group-input-with-checkbox>
          <!-- Character Counter -->
          <div class="text-xs text-gray-500 text-right mt-1">
            {{ getValueControl(targetCustomersFormGroupControls[EMaterialsFormControls.namesOfTargetedSuppliers]).value?.length || 0 }} / 255
          </div>
          <app-base-error-messages
            [control]="getValueControl(targetCustomersFormGroupControls[EMaterialsFormControls.namesOfTargetedSuppliers])"
            [label]="'Names of targeted SEC\'s approved local suppliers'"
          />
        </div>

        <!-- Products Utilize Targeted Product -->
        <div class="flex flex-col gap-2">
          <app-base-label [title]="'Which product(s) manufactured by SEC\'s approved local suppliers will utilize your \'Targeted Product\''" />
          <app-group-input-with-checkbox
            [showCheckbox]="showCheckbox()"
            [hasCommentControl]="getHasCommentControl(targetCustomersFormGroupControls[EMaterialsFormControls.productsUtilizeTargetedProduct])"
            (valueChanged)="upDateSelectedInputs($event, {
              section: 'targetCustomers',
              inputKey: 'productsUtilizeTargetedProduct',
              label: 'Products Utilize Targeted Product'
            })"
          >
            <textarea
              pInputTextarea
              fluid
              placeholder="Enter product(s)"
              [rows]="4"
              [maxlength]="255"
              [formControl]="getValueControl(targetCustomersFormGroupControls[EMaterialsFormControls.productsUtilizeTargetedProduct])"
              [appConditionalColorClass]="highlightInput('productsUtilizeTargetedProduct')"
              [color]="selectedInputColor()"
            ></textarea>
          </app-group-input-with-checkbox>
          <!-- Character Counter -->
          <div class="text-xs text-gray-500 text-right mt-1">
            {{ getValueControl(targetCustomersFormGroupControls[EMaterialsFormControls.productsUtilizeTargetedProduct]).value?.length || 0 }} / 255
          </div>
          <app-base-error-messages
            [control]="getValueControl(targetCustomersFormGroupControls[EMaterialsFormControls.productsUtilizeTargetedProduct])"
            [label]="'product(s) manufactured'"
          />
        </div>
      </div>
      }
    </div>
  </div>

  <!-- Product Manufacturing Experience Section -->
  <div class="flex flex-col gap-4">
    <h2 class="text-lg font-semibold text-gray-900">Product Manufacturing Experience</h2>

    <div class="flex flex-col gap-4">
      <div class="flex flex-col gap-4 md:flex-row">
        <!-- Product Manufacturing Experience Dropdown -->
        <div class="flex flex-col gap-2 flex-1">
          <app-base-label [title]="'Product Manufacturing Experience'" />
          <app-group-input-with-checkbox
            [showCheckbox]="showCheckbox()"
            [hasCommentControl]="getHasCommentControl(productManufacturingExperienceFormGroupControls[EMaterialsFormControls.productManufacturingExperience])"
            (valueChanged)="upDateSelectedInputs($event, {
              section: 'productManufacturingExperience',
              inputKey: 'productManufacturingExperience',
              label: 'Product Manufacturing Experience'
            })"
          >
            <p-select
              [options]="productManufacturingExperienceOptions()"
              [formControl]="getValueControl(productManufacturingExperienceFormGroupControls[EMaterialsFormControls.productManufacturingExperience])"
              optionLabel="name"
              optionValue="id"
              dropdownIcon="icon-chevron-down"
              placeholder="Select product manufacturing experience"
              fluid
              [appConditionalColorClass]="highlightInput('productManufacturingExperience')"
              [color]="selectedInputColor()"
            />
          </app-group-input-with-checkbox>
          <app-base-error-messages
            [control]="getValueControl(productManufacturingExperienceFormGroupControls[EMaterialsFormControls.productManufacturingExperience])"
            [label]="'Product Manufacturing Experience'"
          />
        </div>

        <!-- Do you currently provide this product to SEC? -->
        <div class="flex flex-col gap-2 flex-1">
          <div>
            <app-base-label
              [title]="'Do you currently provide this product to SEC?'"
              [styleClass]="'!mb-[2px]'"
            />
            <span class="text-sm text-gray-700 block text-xs">If “Yes” , provide the following:</span>

            <div class="flex gap-4 min-h-[40px] mt-1">
              <label class="flex items-center gap-2 cursor-pointer">
                <p-radiobutton
                  name="provideToSEC"
                  [value]="true"
                  [formControl]="getFormControl(productManufacturingExperienceFormGroupControls[EMaterialsFormControls.provideToSEC])"
                  inputId="provideToSECYes"
                  size="small"
                />
                <span class="min-w-[100px] text-sm text-gray-700 font-medium">Yes</span>
              </label>
              <label class="flex items-center gap-2 cursor-pointer">
                <p-radiobutton
                  name="provideToSEC"
                  [value]="false"
                  [formControl]="getFormControl(productManufacturingExperienceFormGroupControls[EMaterialsFormControls.provideToSEC])"
                  inputId="provideToSECNo"
                  size="small"
                />
                <span class="min-w-[100px] text-sm text-gray-700 font-medium">No</span>
              </label>
            </div>
          </div>

          <app-base-error-messages
            [control]="getFormControl(productManufacturingExperienceFormGroupControls[EMaterialsFormControls.provideToSEC])"
            [label]="'This field'"
          />
        </div>
      </div>

      <!-- Conditional SEC fields -->
      @if(showSECFields()){
      <div
        class="flex flex-col gap-4 animated"
        animate.enter="fadeIn"
      >
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <!-- Qualified Plant Location (By SEC) -->
          <div class="flex flex-col gap-2">
            <app-base-label
              [title]="'Qualified Plant Location'"
              secondaryTitle="(By SEC)"
            />
            <app-group-input-with-checkbox
              [showCheckbox]="showCheckbox()"
              [hasCommentControl]="getHasCommentControl(productManufacturingExperienceFormGroupControls[EMaterialsFormControls.qualifiedPlantLocationSEC])"
              (valueChanged)="upDateSelectedInputs($event, {
                section: 'productManufacturingExperience',
                inputKey: 'qualifiedPlantLocationSEC',
                label: 'Qualified Plant Location (By SEC)'
              })"
            >
              <input
                type="text"
                pInputText
                [maxlength]="255"
                fluid
                placeholder="Enter qualified plant location"
                [formControl]="getValueControl(productManufacturingExperienceFormGroupControls[EMaterialsFormControls.qualifiedPlantLocationSEC])"
                [appConditionalColorClass]="highlightInput('qualifiedPlantLocationSEC')"
                [color]="selectedInputColor()"
              />
            </app-group-input-with-checkbox>
            <app-base-error-messages
              [control]="getValueControl(productManufacturingExperienceFormGroupControls[EMaterialsFormControls.qualifiedPlantLocationSEC])"
              [label]="'Qualified Plant Location'"
            />
          </div>

          <!-- Approved Vendor ID (with SEC) -->
          <div class="flex flex-col gap-2">
            <app-base-label
              [title]="'Approved Vendor ID'"
              secondaryTitle="(with SEC)"
            />
            <app-group-input-with-checkbox
              [showCheckbox]="showCheckbox()"
              [hasCommentControl]="getHasCommentControl(productManufacturingExperienceFormGroupControls[EMaterialsFormControls.approvedVendorIDSEC])"
              (valueChanged)="upDateSelectedInputs($event, {
                section: 'productManufacturingExperience',
                inputKey: 'approvedVendorIDSEC',
                label: 'Approved Vendor ID (with SEC)'
              })"
            >
              <input
                type="text"
                pInputText
                [maxlength]="255"
                fluid
                placeholder="Enter approved vendor ID"
                [formControl]="getValueControl(productManufacturingExperienceFormGroupControls[EMaterialsFormControls.approvedVendorIDSEC])"
                [appConditionalColorClass]="highlightInput('approvedVendorIDSEC')"
                [color]="selectedInputColor()"
              />
            </app-group-input-with-checkbox>
            <app-base-error-messages
              [control]="getValueControl(productManufacturingExperienceFormGroupControls[EMaterialsFormControls.approvedVendorIDSEC])"
              [label]="'Approved Vendor ID'"
            />
          </div>

          <!-- Years of Experience (with SEC) -->
          <div class="flex flex-col gap-2">
            <app-base-label
              [title]="'Years of Experience'"
              secondaryTitle="(with SEC)"
            />
            <app-group-input-with-checkbox
              [showCheckbox]="showCheckbox()"
              [hasCommentControl]="getHasCommentControl(productManufacturingExperienceFormGroupControls[EMaterialsFormControls.yearsOfExperienceSEC])"
              (valueChanged)="upDateSelectedInputs($event, {
                section: 'productManufacturingExperience',
                inputKey: 'yearsOfExperienceSEC',
                label: 'Years of Experience (with SEC)'
              })"
            >
              <p-inputnumber
                fluid
                placeholder="Enter years of experience"
                [maxlength]="2"
                [formControl]="getValueControl(productManufacturingExperienceFormGroupControls[EMaterialsFormControls.yearsOfExperienceSEC])"
                [appConditionalColorClass]="highlightInput('yearsOfExperienceSEC')"
                [color]="selectedInputColor()"
              />
            </app-group-input-with-checkbox>
            <app-base-error-messages
              [control]="getValueControl(productManufacturingExperienceFormGroupControls[EMaterialsFormControls.yearsOfExperienceSEC])"
              [label]="'Years of Experience'"
            />
          </div>

          <!-- Total Quantities provided to SEC -->
          <div class="flex flex-col gap-2">
            <app-base-label
              [title]="'Total Quantities provided to SEC'"
              secondaryTitle="(2019 onwards)"
            />
            <app-group-input-with-checkbox
              [showCheckbox]="showCheckbox()"
              [hasCommentControl]="getHasCommentControl(productManufacturingExperienceFormGroupControls[EMaterialsFormControls.totalQuantitiesSEC])"
              (valueChanged)="upDateSelectedInputs($event, {
                section: 'productManufacturingExperience',
                inputKey: 'totalQuantitiesSEC',
                label: 'Total Quantities provided to SEC'
              })"
            >
              <p-inputnumber
                fluid
                [maxlength]="10"
                placeholder="Enter total quantities provided to SEC"
                [formControl]="getValueControl(productManufacturingExperienceFormGroupControls[EMaterialsFormControls.totalQuantitiesSEC])"
                [appConditionalColorClass]="highlightInput('totalQuantitiesSEC')"
                [color]="selectedInputColor()"
              />
            </app-group-input-with-checkbox>
            <app-base-error-messages
              [control]="getValueControl(productManufacturingExperienceFormGroupControls[EMaterialsFormControls.totalQuantitiesSEC])"
              [label]="'Total Quantities'"
            />
          </div>
        </div>
      </div>
      }

      <!-- Do you currently provide this product to SEC's approved local suppliers? -->
      <div class="flex flex-col gap-2">
        <div>
          <app-base-label [title]="'Do you currently provide this product to SEC\'s approved local suppliers?'" />
          <span class="text-sm text-gray-700 block text-xs">If 'Yes', provide the following:</span>
        </div>
        <div class="flex gap-4">
          <label class="flex items-center gap-2 cursor-pointer">
            <p-radiobutton
              name="provideToLocalSuppliers"
              [value]="true"
              [formControl]="getFormControl(productManufacturingExperienceFormGroupControls[EMaterialsFormControls.provideToLocalSuppliers])"
              inputId="provideToLocalSuppliersYes"
              size="small"
            />
            <span class="min-w-[100px] text-sm text-gray-700 font-medium">Yes</span>
          </label>
          <label class="flex items-center gap-2 cursor-pointer">
            <p-radiobutton
              name="provideToLocalSuppliers"
              [value]="false"
              [formControl]="getFormControl(productManufacturingExperienceFormGroupControls[EMaterialsFormControls.provideToLocalSuppliers])"
              inputId="provideToLocalSuppliersNo"
              size="small"
            />
            <span class="min-w-[100px] text-sm text-gray-700 font-medium">No</span>
          </label>
        </div>
        <app-base-error-messages
          [control]="getFormControl(productManufacturingExperienceFormGroupControls[EMaterialsFormControls.provideToLocalSuppliers])"
          [label]="'This field'"
        />
      </div>

      <!-- Conditional Local Suppliers fields -->
      @if(showLocalSuppliersFields()){
      <div
        class="flex flex-col gap-4 animated"
        animate.enter="fadeIn"
      >
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <!-- Name(s) of SEC approved local supplier(s) -->
          <div class="flex flex-col gap-2">
            <app-base-label [title]="'Name(s) of SEC approved local supplier(s)'" />
            <app-group-input-with-checkbox
              [showCheckbox]="showCheckbox()"
              [hasCommentControl]="getHasCommentControl(productManufacturingExperienceFormGroupControls[EMaterialsFormControls.namesOfSECApprovedSuppliers])"
              (valueChanged)="upDateSelectedInputs($event, {
                section: 'productManufacturingExperience',
                inputKey: 'namesOfSECApprovedSuppliers',
                label: 'Name(s) of SEC approved local supplier(s)'
              })"
            >
              <input
                type="text"
                pInputText
                fluid
                placeholder="Enter name(s) of SEC approved local supplier(s)"
                [maxlength]="255"
                [formControl]="getValueControl(productManufacturingExperienceFormGroupControls[EMaterialsFormControls.namesOfSECApprovedSuppliers])"
                [appConditionalColorClass]="highlightInput('namesOfSECApprovedSuppliers')"
                [color]="selectedInputColor()"
              />
            </app-group-input-with-checkbox>
            <app-base-error-messages
              [control]="getValueControl(productManufacturingExperienceFormGroupControls[EMaterialsFormControls.namesOfSECApprovedSuppliers])"
              [label]="'Name(s) of SEC approved local supplier(s)'"
            />
          </div>

          <!-- Qualified Plant Location -->
          <div class="flex flex-col gap-2">
            <app-base-label [title]="'Qualified Plant Location'" />
            <app-group-input-with-checkbox
              [showCheckbox]="showCheckbox()"
              [hasCommentControl]="getHasCommentControl(productManufacturingExperienceFormGroupControls[EMaterialsFormControls.qualifiedPlantLocation])"
              (valueChanged)="upDateSelectedInputs($event, {
                section: 'productManufacturingExperience',
                inputKey: 'qualifiedPlantLocation',
                label: 'Qualified Plant Location'
              })"
            >
              <input
                type="text"
                pInputText
                [maxlength]="255"
                fluid
                placeholder="Enter qualified plant location"
                [formControl]="getValueControl(productManufacturingExperienceFormGroupControls[EMaterialsFormControls.qualifiedPlantLocation])"
                [appConditionalColorClass]="highlightInput('qualifiedPlantLocation')"
                [color]="selectedInputColor()"
              />
            </app-group-input-with-checkbox>
            <app-base-error-messages
              [control]="getValueControl(productManufacturingExperienceFormGroupControls[EMaterialsFormControls.qualifiedPlantLocation])"
              [label]="'Qualified Plant Location'"
            />
          </div>

          <!-- Years of Experience -->
          <div class="flex flex-col gap-2">
            <app-base-label [title]="'Years of Experience'" />
            <app-group-input-with-checkbox
              [showCheckbox]="showCheckbox()"
              [hasCommentControl]="getHasCommentControl(productManufacturingExperienceFormGroupControls[EMaterialsFormControls.yearsOfExperience])"
              (valueChanged)="upDateSelectedInputs($event, {
                section: 'productManufacturingExperience',
                inputKey: 'yearsOfExperience',
                label: 'Years of Experience'
              })"
            >
              <p-inputnumber
                fluid
                [maxlength]="2"
                placeholder="Enter years of experience"
                [formControl]="getValueControl(productManufacturingExperienceFormGroupControls[EMaterialsFormControls.yearsOfExperience])"
                [appConditionalColorClass]="highlightInput('yearsOfExperience')"
                [color]="selectedInputColor()"
              />
            </app-group-input-with-checkbox>
            <app-base-error-messages
              [control]="getValueControl(productManufacturingExperienceFormGroupControls[EMaterialsFormControls.yearsOfExperience])"
              [label]="'Years of Experience'"
            />
          </div>

          <!-- Total quantities provided to all approved local suppliers -->
          <div class="flex flex-col gap-2">
            <div>
              <app-base-label [title]="'Total quantities provided to all approved local suppliers'" />
              <span class="text-sm text-gray-600 ms-2">(2019 onwards)</span>
            </div>
            <app-group-input-with-checkbox
              [showCheckbox]="showCheckbox()"
              [hasCommentControl]="getHasCommentControl(productManufacturingExperienceFormGroupControls[EMaterialsFormControls.totalQuantities])"
              (valueChanged)="upDateSelectedInputs($event, {
                section: 'productManufacturingExperience',
                inputKey: 'totalQuantities',
                label: 'Total quantities provided to all approved local suppliers'
              })"
            >
              <p-inputnumber
                fluid
                [maxlength]="10"
                placeholder="Enter total quantities provided"
                [formControl]="getValueControl(productManufacturingExperienceFormGroupControls[EMaterialsFormControls.totalQuantities])"
                [appConditionalColorClass]="highlightInput('totalQuantities')"
                [color]="selectedInputColor()"
              />
            </app-group-input-with-checkbox>
            <app-base-error-messages
              [control]="getValueControl(productManufacturingExperienceFormGroupControls[EMaterialsFormControls.totalQuantities])"
              [label]="'Total quantities provided to all approved local suppliers'"
            />
          </div>
        </div>
      </div>
      }
    </div>
  </div>

  <app-comment-input
    [commentFormControl]="commentFormControl"
    [commentPhase]="commentPhase()"
  />

  @if(showCheckbox()){
  <app-comment-state-component
    [commentsCount]="selectedInputs().length"
    [(commentPhase)]="commentPhase"
    [commentFormControl]="commentFormControl"
    (deleteComments)="onDeleteComments()"
    (saveComment)="commentPhase() === 'editing' ? onSaveEditedComment() : onSaveComment()"
  />
  }

  @if(showDeleteConfirmationDialog()){
  <app-general-confirmation-dialog
    [(visible)]="showDeleteConfirmationDialog"
    [title]="'Are you sure you want to delete the comment and selected fields?'"
    [confirmationLabel]="'Delete'"
    [cancelLabel]="'Cancel'"
    [confirmButtonSeverity]="'danger'"
    [icon]="'icon-trash-2'"
    (confirmed)="onConfirmDeleteComment()"
    (onCancel)="onCancelDeleteComment()"
  />
  }
</div>