<div class="flex flex-col gap-6 bg-white">
  <app-summary-section-header
    [title]="'Product & Plant Overview'"
    [isViewMode]="isViewMode()"
    (onEdit)="onEditClick()"
  />

  <!-- Overview -->
  <div class="flex flex-col gap-4">
    <h3 class="text-md font-semibold text-gray-900">Overview</h3>
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
      <app-summary-field
        [label]="'Product Name (i.e. Product Targeted for Localization)'"
        [value]="productName()"
        [beforeValue]="hasFieldComment('productName') ? getBeforeValue('productName') : null"
        [afterValue]="productName()"
        [showDiff]="shouldShowDiff('productName')"
        [hasError]="hasFieldError('overviewFormGroup.productName.value')"
        [hasComment]="productNameHasComment()"
        [isEmpty]="!productName()"
      />
      <app-summary-field
        [label]="'Product Specifications (incl. voltage ratings) targeted for Localization)'"
        [value]="productSpecifications()"
        [beforeValue]="hasFieldComment('productSpecifications') ? getBeforeValue('productSpecifications') : null"
        [afterValue]="productSpecifications()"
        [showDiff]="shouldShowDiff('productSpecifications')"
        [hasError]="hasFieldError('overviewFormGroup.productSpecifications.value')"
        [hasComment]="productSpecificationsHasComment()"
        [isEmpty]="!productSpecifications()"
      />
      <app-summary-field
        [label]="'Targeted Annual Plant Capacity (Mention Unit of Measurement)'"
        [value]="targetedAnnualPlantCapacity()"
        [beforeValue]="hasFieldComment('targetedAnnualPlantCapacity') ? getBeforeValue('targetedAnnualPlantCapacity') : null"
        [afterValue]="targetedAnnualPlantCapacity()"
        [showDiff]="shouldShowDiff('targetedAnnualPlantCapacity')"
        [hasError]="hasFieldError('overviewFormGroup.targetedAnnualPlantCapacity.value')"
        [hasComment]="targetedAnnualPlantCapacityHasComment()"
        [isEmpty]="!targetedAnnualPlantCapacity()"
      />
      <app-summary-field
        [label]="'Time Required to Setup Factory (Once Localization Plan is Approved)'"
        [value]="timeRequiredToSetupFactory()"
        [beforeValue]="hasFieldComment('timeRequiredToSetupFactory') ? getBeforeValue('timeRequiredToSetupFactory') : null"
        [afterValue]="timeRequiredToSetupFactory()"
        [showDiff]="shouldShowDiff('timeRequiredToSetupFactory')"
        [hasError]="hasFieldError('overviewFormGroup.timeRequiredToSetupFactory.value')"
        [hasComment]="timeRequiredToSetupFactoryHasComment()"
        [isEmpty]="!timeRequiredToSetupFactory()"
      />
    </div>
  </div>

  <!-- Expected CAPEX Investment -->
  <div class="flex flex-col gap-4">
    <h3 class="text-md font-semibold text-gray-900">Expected CAPEX Investment</h3>
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
      <app-summary-field
        [label]="'Land (%)'"
        [value]="landPercentage()"
        [beforeValue]="hasFieldComment('landPercentage') ? getBeforeValue('landPercentage') : null"
        [afterValue]="landPercentage()"
        [showDiff]="shouldShowDiff('landPercentage')"
        [hasError]="hasFieldError('expectedCAPEXInvestmentFormGroup.landPercentage.value')"
        [hasComment]="landPercentageHasComment()"
        [isEmpty]="landPercentage() === null || landPercentage() === undefined"
      />
      <app-summary-field
        [label]="'Building (%)'"
        [value]="buildingPercentage()"
        [beforeValue]="hasFieldComment('buildingPercentage') ? getBeforeValue('buildingPercentage') : null"
        [afterValue]="buildingPercentage()"
        [showDiff]="shouldShowDiff('buildingPercentage')"
        [hasError]="hasFieldError('expectedCAPEXInvestmentFormGroup.buildingPercentage.value')"
        [hasComment]="buildingPercentageHasComment()"
        [isEmpty]="buildingPercentage() === null || buildingPercentage() === undefined"
      />
      <app-summary-field
        [label]="'Machinery / Equipment (%)'"
        [value]="machineryEquipmentPercentage()"
        [beforeValue]="hasFieldComment('machineryEquipmentPercentage') ? getBeforeValue('machineryEquipmentPercentage') : null"
        [afterValue]="machineryEquipmentPercentage()"
        [showDiff]="shouldShowDiff('machineryEquipmentPercentage')"
        [hasError]="hasFieldError('expectedCAPEXInvestmentFormGroup.machineryEquipmentPercentage.value')"
        [hasComment]="machineryEquipmentPercentageHasComment()"
        [isEmpty]="machineryEquipmentPercentage() === null || machineryEquipmentPercentage() === undefined"
      />
      <app-summary-field
        [label]="'Others (%)'"
        [value]="othersPercentage()"
        [beforeValue]="hasFieldComment('othersPercentage') ? getBeforeValue('othersPercentage') : null"
        [afterValue]="othersPercentage()"
        [showDiff]="shouldShowDiff('othersPercentage')"
        [hasError]="hasFieldError('expectedCAPEXInvestmentFormGroup.othersPercentage.value')"
        [hasComment]="othersPercentageHasComment()"
        [isEmpty]="othersPercentage() === null || othersPercentage() === undefined"
      />
      @if(othersPercentage()){
      <app-summary-field
        [label]="'Others Description'"
        [value]="othersDescription()"
        [beforeValue]="hasFieldComment('othersDescription') ? getBeforeValue('othersDescription') : null"
        [afterValue]="othersDescription()"
        [showDiff]="shouldShowDiff('othersDescription')"
        [hasError]="hasFieldError('expectedCAPEXInvestmentFormGroup.othersDescription.value')"
        [hasComment]="othersDescriptionHasComment()"
        [isEmpty]="othersDescription() === null || othersDescription() === undefined"
      />
      }
    </div>
  </div>

  <!-- Target Customers -->
  <div class="flex flex-col gap-4">
    <h3 class="text-lg font-semibold text-gray-900">Target Customers</h3>
    <div class="flex flex-col gap-4">
      <app-summary-field
        [label]="'Targeted Customer'"
        [value]="targetedCustomer()"
        [beforeValue]="hasFieldComment('targetedCustomer') ? getBeforeValue('targetedCustomer') : null"
        [afterValue]="targetedCustomer()"
        [showDiff]="shouldShowDiff('targetedCustomer')"
        [hasError]="hasFieldError('targetCustomersFormGroup.targetedCustomer.value')"
        [hasComment]="targetedCustomerHasComment()"
        [isEmpty]="!targetedCustomer()"
      />

      @if(showSECApprovedLocalSuppliersSection()){
      <h3 class="text-sm font-semibold text-gray-900">If Targeting "SEC's approved local suppliers", mention the following:</h3>

      <app-summary-field
        [label]="'Provide names of targeted SEC\'s approved local suppliers'"
        [value]="namesOfTargetedSuppliers()"
        [beforeValue]="hasFieldComment('namesOfTargetedSuppliers') ? getBeforeValue('namesOfTargetedSuppliers') : null"
        [afterValue]="namesOfTargetedSuppliers()"
        [showDiff]="shouldShowDiff('namesOfTargetedSuppliers')"
        [hasError]="hasFieldError('targetCustomersFormGroup.namesOfTargetedSuppliers.value')"
        [hasComment]="namesOfTargetedSuppliersHasComment()"
        [isEmpty]="!namesOfTargetedSuppliers()"
      />
      <app-summary-field
        [label]="productsUtilizeLabel"
        [value]="productsUtilizeTargetedProduct()"
        [beforeValue]="hasFieldComment('productsUtilizeTargetedProduct') ? getBeforeValue('productsUtilizeTargetedProduct') : null"
        [afterValue]="productsUtilizeTargetedProduct()"
        [showDiff]="shouldShowDiff('productsUtilizeTargetedProduct')"
        [hasError]="hasFieldError('targetCustomersFormGroup.productsUtilizeTargetedProduct.value')"
        [hasComment]="productsUtilizeTargetedProductHasComment()"
        [isEmpty]="!productsUtilizeTargetedProduct()"
      />
      }
    </div>
  </div>

  <!-- Product Manufacturing Experience -->
  <div class="flex flex-col gap-4">
    <h3 class="text-lg font-semibold text-gray-900">Product Manufacturing Experience</h3>
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
      <app-summary-field
        [label]="'Product Manufacturing Experience'"
        [value]="productManufacturingExperience()"
        [beforeValue]="hasFieldComment('productManufacturingExperience') ? getBeforeValue('productManufacturingExperience') : null"
        [afterValue]="productManufacturingExperience()"
        [showDiff]="shouldShowDiff('productManufacturingExperience')"
        [hasError]="hasFieldError('productManufacturingExperienceFormGroup.productManufacturingExperience.value')"
        [hasComment]="productManufacturingExperienceHasComment()"
        [isEmpty]="!productManufacturingExperience()"
      />
      <app-summary-field
        [label]="'Do you currently provide this product to SEC?'"
        [value]="provideToSEC()"
        [isBoolean]="true"
        [hasError]="hasFieldError('productManufacturingExperienceFormGroup.provideToSEC')"
        [isEmpty]="provideToSEC() === null"
      />
      @if(provideToSEC()){
      <app-summary-field
        [label]="'Qualified Plant Location (By SEC)'"
        [value]="qualifiedPlantLocationSEC()"
        [beforeValue]="hasFieldComment('qualifiedPlantLocationSEC') ? getBeforeValue('qualifiedPlantLocationSEC') : null"
        [afterValue]="qualifiedPlantLocationSEC()"
        [showDiff]="shouldShowDiff('qualifiedPlantLocationSEC')"
        [hasError]="hasFieldError('productManufacturingExperienceFormGroup.qualifiedPlantLocationSEC.value')"
        [hasComment]="qualifiedPlantLocationSECHasComment()"
        [isEmpty]="!qualifiedPlantLocationSEC()"
      />
      <app-summary-field
        [label]="'Approved Vendor ID (with SEC)'"
        [value]="approvedVendorIDSEC()"
        [beforeValue]="hasFieldComment('approvedVendorIDSEC') ? getBeforeValue('approvedVendorIDSEC') : null"
        [afterValue]="approvedVendorIDSEC()"
        [showDiff]="shouldShowDiff('approvedVendorIDSEC')"
        [hasError]="hasFieldError('productManufacturingExperienceFormGroup.approvedVendorIDSEC.value')"
        [hasComment]="approvedVendorIDSECHasComment()"
        [isEmpty]="!approvedVendorIDSEC()"
      />
      <app-summary-field
        [label]="'Years of Experience (with SEC)'"
        [value]="yearsOfExperienceSEC()"
        [beforeValue]="hasFieldComment('yearsOfExperienceSEC') ? getBeforeValue('yearsOfExperienceSEC') : null"
        [afterValue]="yearsOfExperienceSEC()"
        [showDiff]="shouldShowDiff('yearsOfExperienceSEC')"
        [hasError]="hasFieldError('productManufacturingExperienceFormGroup.yearsOfExperienceSEC.value')"
        [hasComment]="yearsOfExperienceSECHasComment()"
        [isEmpty]="!yearsOfExperienceSEC()"
      />
      <app-summary-field
        [label]="'Total Quantities provided to SEC (2019 onwards)'"
        [value]="totalQuantitiesSEC()"
        [beforeValue]="hasFieldComment('totalQuantitiesSEC') ? getBeforeValue('totalQuantitiesSEC') : null"
        [afterValue]="totalQuantitiesSEC()"
        [showDiff]="shouldShowDiff('totalQuantitiesSEC')"
        [hasError]="hasFieldError('productManufacturingExperienceFormGroup.totalQuantitiesSEC.value')"
        [hasComment]="totalQuantitiesSECHasComment()"
        [isEmpty]="!totalQuantitiesSEC()"
      />
      }
      <app-summary-field
        class="col-span-2"
        [label]="provideToLocalSuppliersLabel"
        [value]="provideToLocalSuppliers()"
        [isBoolean]="true"
        [hasError]="hasFieldError('productManufacturingExperienceFormGroup.provideToLocalSuppliers')"
        [isEmpty]="provideToLocalSuppliers() === null"
      />
      @if(provideToLocalSuppliers()){
      <app-summary-field
        [label]="'Name(s) of SEC approved local supplier(s)'"
        [value]="namesOfSECApprovedSuppliers()"
        [beforeValue]="hasFieldComment('namesOfSECApprovedSuppliers') ? getBeforeValue('namesOfSECApprovedSuppliers') : null"
        [afterValue]="namesOfSECApprovedSuppliers()"
        [showDiff]="shouldShowDiff('namesOfSECApprovedSuppliers')"
        [hasError]="hasFieldError('productManufacturingExperienceFormGroup.namesOfSECApprovedSuppliers.value')"
        [hasComment]="namesOfSECApprovedSuppliersHasComment()"
        [isEmpty]="!namesOfSECApprovedSuppliers()"
      />
      <app-summary-field
        [label]="'Qualified Plant Location'"
        [value]="qualifiedPlantLocation()"
        [beforeValue]="hasFieldComment('qualifiedPlantLocation') ? getBeforeValue('qualifiedPlantLocation') : null"
        [afterValue]="qualifiedPlantLocation()"
        [showDiff]="shouldShowDiff('qualifiedPlantLocation')"
        [hasError]="hasFieldError('productManufacturingExperienceFormGroup.qualifiedPlantLocation.value')"
        [hasComment]="qualifiedPlantLocationHasComment()"
        [isEmpty]="!qualifiedPlantLocation()"
      />
      <app-summary-field
        [label]="'Years of Experience'"
        [value]="yearsOfExperience()"
        [beforeValue]="hasFieldComment('yearsOfExperience') ? getBeforeValue('yearsOfExperience') : null"
        [afterValue]="yearsOfExperience()"
        [showDiff]="shouldShowDiff('yearsOfExperience')"
        [hasError]="hasFieldError('productManufacturingExperienceFormGroup.yearsOfExperience.value')"
        [hasComment]="yearsOfExperienceHasComment()"
        [isEmpty]="!yearsOfExperience()"
      />
      <app-summary-field
        [label]="'Total quantities provided to all approved local suppliers (2019 onwards)'"
        [value]="totalQuantities()"
        [beforeValue]="hasFieldComment('totalQuantities') ? getBeforeValue('totalQuantities') : null"
        [afterValue]="totalQuantities()"
        [showDiff]="shouldShowDiff('totalQuantities')"
        [hasError]="hasFieldError('productManufacturingExperienceFormGroup.totalQuantities.value')"
        [hasComment]="totalQuantitiesHasComment()"
        [isEmpty]="!totalQuantities()"
      />
      }
    </div>
  </div>
</div>