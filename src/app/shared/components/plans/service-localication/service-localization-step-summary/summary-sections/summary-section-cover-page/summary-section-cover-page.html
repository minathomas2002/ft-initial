<div class="flex flex-col gap-6 bg-white">
  <!-- Cover Page Section -->
  <div class="flex flex-col gap-4">
    <app-summary-section-header
      [title]="'Cover Page'"
      [isViewMode]="isViewMode()"
      (onEdit)="onEditClick()"
    />

    <!-- Company Information -->
    <div class="flex flex-col gap-4">
      <h3 class="text-lg font-semibold text-[#4A4E5A]">Company Information</h3>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <app-summary-field
          [label]="'Plan Title'"
          [value]="planTitle()"
          [hasError]="hasFieldError('coverPageCompanyInformationFormGroup.planTitle.value')"
          [hasComment]="planTitleHasComment()"
          [isResolved]="planTitleIsResolved()"
          [isEmpty]="!planTitle()"
          [beforeValue]="planTitleHasComment() ? getBeforeValue('planTitle') : null"
          [afterValue]="planTitle()"
          [showDiff]="shouldShowDiff('planTitle')"
        />
        <app-summary-field
          [label]="'Company Name'"
          [value]="companyName()"
          [hasError]="hasFieldError('coverPageCompanyInformationFormGroup.companyName.value')"
          [hasComment]="companyNameHasComment()"
          [isResolved]="companyNameIsResolved()"
          [isEmpty]="!companyName()"
          [beforeValue]="companyNameHasComment() ? getBeforeValue('companyName') : null"
          [afterValue]="companyName()"
          [showDiff]="shouldShowDiff('companyName')"
        />
      </div>
    </div>

    <!-- Services Section -->
    <div class="flex flex-col gap-4">
      <h3 class="text-lg font-semibold text-[#4A4E5A]">Services</h3>
      <div class="overflow-x-auto">
        <div class="rounded-2xl overflow-hidden border border-gray-300">
          <p-table
            [value]="services()"
            [tableStyle]="{ 'border-collapse': 'collapse', width: '100%' }"
          >
            <ng-template pTemplate="header">
              <tr class="[&_th]:bg-[#F9FAFA]! [&_th]:text-[#4A4E5A]!">
                <th class="p-3 text-left text-sm font-medium text-[#4A4E5A]">Service Name</th>
              </tr>
            </ng-template>

            <ng-template
              pTemplate="body"
              let-service
              let-rowIndex="rowIndex"
            >
              <tr>
                <td class="border-t border-gray-300 p-4">
                  <app-summary-table-cell
                    [value]="service.serviceName"
                    [isEmpty]="!service.serviceName"
                    [hasError]="hasServiceItemFieldError(rowIndex, 'serviceName')"
                    [hasComment]="hasServiceItemComment(rowIndex)"
                    [isResolved]="isServiceItemResolved(rowIndex)"
                    [beforeValue]="hasServiceItemComment(rowIndex) ? getBeforeValue('serviceName', rowIndex) : null"
                    [afterValue]="getAfterValue('serviceName', rowIndex)"
                    [showDiff]="shouldShowDiff('serviceName', rowIndex)"
                  />
                </td>
              </tr>
            </ng-template>
          </p-table>
        </div>
      </div>
    </div>
  </div>
</div>