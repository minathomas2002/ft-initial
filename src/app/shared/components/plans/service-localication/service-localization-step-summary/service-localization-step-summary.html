<div class="flex flex-col gap-8">
  <!-- Step 1: Cover Page -->
  <app-summary-section-cover-page
    [isViewMode]="isViewMode()"
    [formGroup]="step1FormGroup"
    [pageComments]="step1Comments()"
    [commentTitle]="commentTitle()"
    [correctedFieldIds]="step1CorrectedFields()"
    (onEdit)="onEditStepClick(coverStepNumber())"
  />
  @if (isViewMode() && step1Comments().length > 0) {
  <div class="bg-orange-50 border border-orange-500 rounded-lg p-4 mt-4">
    <div class="flex flex-col gap-2">
      <h3 class="text-sm font-semibold text-orange-900">{{ commentTitle() }} - Cover Page</h3>
      <p class="text-sm text-orange-800 whitespace-pre-line">{{ getStep1CommentText() }}</p>
    </div>
  </div>
  }

  <!-- Step 2: Overview & Company Information -->
  <app-summary-section-overview
    [isViewMode]="isViewMode()"
    [formGroup]="step2FormGroup"
    [pageComments]="step2Comments()"
    [commentTitle]="commentTitle()"
    [correctedFieldIds]="step2CorrectedFields()"
    (onEdit)="onEditStepClick(overviewStepNumber())"
  />
  @if (isViewMode() && step2Comments().length > 0) {
  <div class="bg-orange-50 border border-orange-500 rounded-lg p-4 mt-4">
    <div class="flex flex-col gap-2">
      <h3 class="text-sm font-semibold text-orange-900">{{ commentTitle() }} - Overview</h3>
      <p class="text-sm text-orange-800 whitespace-pre-line">{{ getStep2CommentText() }}</p>
    </div>
  </div>
  }

  <!-- Step 3: Existing Saudi Company -->
  @if (includeExistingSaudi()) {
  <app-summary-section-existing-saudi
    [isViewMode]="isViewMode()"
    [formGroup]="step3FormGroup"
    [pageComments]="step3Comments()"
    [commentTitle]="commentTitle()"
    [correctedFieldIds]="step3CorrectedFields()"
    (onEdit)="onEditStepClick(existingSaudiStepNumber())"
  />
  @if (isViewMode() && step3Comments().length > 0) {
  <div class="bg-orange-50 border border-orange-500 rounded-lg p-4 mt-4">
    <div class="flex flex-col gap-2">
      <h3 class="text-sm font-semibold text-orange-900">{{ commentTitle() }} - Existing Saudi Co.</h3>
      <p class="text-sm text-orange-800 whitespace-pre-line">{{ getStep3CommentText() }}</p>
    </div>
  </div>
  }
  }

  <!-- Step 4: Direct Localization by Foreign Entity -->
  @if (includeDirectLocalization()) {
  <app-summary-section-direct-localization
    [isViewMode]="isViewMode()"
    [formGroup]="step4FormGroup"
    [pageComments]="step4Comments()"
    [commentTitle]="commentTitle()"
    [correctedFieldIds]="step4CorrectedFields()"
    (onEdit)="onEditStepClick(directLocalizationStepNumber())"
  />
  @if (isViewMode() && step4Comments().length > 0) {
  <div class="bg-orange-50 border border-orange-500 rounded-lg p-4 mt-4">
    <div class="flex flex-col gap-2">
      <h3 class="text-sm font-semibold text-orange-900">{{ commentTitle() }} - Direct Localization</h3>
      <p class="text-sm text-orange-800 whitespace-pre-line">{{ getStep4CommentText() }}</p>
    </div>
  </div>
  }
  }

  <!-- Signature (view/edit modes) -->
  @if (signature() && isViewMode()) {
  <app-summary-section-signature [signature]="signature()" />
  }
</div>