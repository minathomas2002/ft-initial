<app-base-dialog
  [(visible)]="visible"
  [showCloseButton]="true"
  [showConfirmButton]="true"
  icon="icon-check-circle"
  [isConfirmationDisabled]="!formService.isFormValid() || isProcessing()"
  [isLoading]="isProcessing()"
  [contentStyleClass]="'p-6'"
  [cancelLabel]="'Back'"
  (onClose)="onDialogClose()"
  (onConfirm)="onSubmitClick()"
>
  <div class="modal-content-wrapper max-w-[600px]">
    <!-- Disclaimer Message - appears right after title -->
    <div class="disclaimer-container">
      <h2 class="text-lg font-semibold text-gray-900">{{ 'plans.submission.confirmTitle' | translate }}</h2>
      <p class="text-sm text-gray-600">
        {{ 'plans.submission.disclaimer' | translate }}
      </p>
    </div>

    <div class="submission-form">
      <!-- Two Column Grid for Input Fields -->
      <div class="form-grid">
        <!-- Name Field -->
        <div class="form-field">
          <label
            for="name"
            class="form-label"
          >
            {{ 'plans.submission.name' | translate }} <span class="required">*</span>
          </label>
          <input
            id="name"
            type="text"
            pInputText
            [maxlength]="100"
            [formControl]="formService.nameControl"
            [placeholder]="'plans.submission.namePlaceholder' | translate"
            class="w-full"
          />
          <app-base-error-messages
            [control]="formService.nameControl"
            [label]="'plans.submission.name' | translate"
          />
        </div>

        <!-- Job Title Field -->
        <div class="form-field">
          <label
            for="jobTitle"
            class="form-label"
          >
            {{ 'plans.submission.jobTitle' | translate }} <span class="required">*</span>
          </label>
          <input
            id="jobTitle"
            type="text"
            pInputText
            [maxlength]="100"
            [formControl]="formService.jobTitleControl"
            [placeholder]="'plans.submission.jobTitlePlaceholder' | translate"
            class="w-full"
          />
          <app-base-error-messages
            [control]="formService.jobTitleControl"
            [label]="'plans.submission.jobTitle' | translate"
          />
        </div>

        <!-- Contact Number Field -->
        <div class="form-field">
          <label
            for="contactNumber"
            class="form-label"
          >
            {{ 'plans.submission.contactNumber' | translate }} <span class="required">*</span>
          </label>
          <app-phone-input
            id="contactNumber"
            [ngModel]="phoneInputValue()"
            (ngModelChange)="onPhoneNumberChange($event)"
            [placeholder]="'plans.submission.contactNumberPlaceholder' | translate"
            class="w-full"
          />
          <app-base-error-messages
            [control]="formService.contactNumberControl"
            [label]="'plans.submission.contactNumber' | translate"
          />
        </div>

        <!-- Email ID Field -->
        <div class="form-field">
          <label
            for="emailId"
            class="form-label"
          >
            {{ 'plans.submission.emailId' | translate }} <span class="required">*</span>
          </label>
          <input
            id="emailId"
            type="email"
            pInputText
            [formControl]="formService.emailIdControl"
            [placeholder]="'plans.submission.emailIdPlaceholder' | translate"
            class="w-full"
          />
          <app-base-error-messages
            [control]="formService.emailIdControl"
            [label]="'plans.submission.emailId' | translate"
          />
        </div>
      </div>

      <!-- Signature Field -->
      <div class="form-field signature-field">
        <label class="form-label">
          {{ 'plans.submission.drawSignature' | translate }} <span class="required">*</span>
        </label>
        <app-signature-pad
          [existingSignature]="existingSignature()"
          (onSignatureChange)="onSignatureChange($event)"
        />
        <app-base-error-messages
          [control]="formService.signatureControl"
          [label]="'plans.submission.signature' | translate"
        />
      </div>
    </div>
  </div>

  <ng-template #footerButtons>
    <p-button
      [label]="'plans.submission.back' | translate"
      severity="secondary"
      (onClick)="onBackClick()"
      [disabled]="isSubmitting()"
      class="flex-initial"
    />
    <p-button
      [label]="'plans.submission.submit' | translate"
      severity="primary"
      (onClick)="onSubmitClick()"
      [disabled]="isSubmitDisabled()"
      [loading]="isSubmitting()"
      class="flex-initial"
    />
  </ng-template>
</app-base-dialog>
