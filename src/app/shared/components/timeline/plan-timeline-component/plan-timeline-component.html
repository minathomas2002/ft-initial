<app-timeline [events]="events()">
  <ng-template
    #timelineTemplate
    let-item="item"
  >
    <div class="flex flex-col gap-2">
      <!-- status and date -->
      <div class="flex justify-between items-start">

        <!-- Status -->
        <app-base-tag
          [value]="getStatusLabel(item.item.status)"
          [color]="getStatusBadgeColor(item.item.status)"
        ></app-base-tag>

        <!-- Date & Days -->
        <div class="">
          <div class="flex items-center justify-end text-xs text-gray-700 whitespace-nowrap">
            <i class="icon-clock text-gray-400 px-1"></i>
            <span>
              {{ item.item.timestamp+'Z' | date:'EEEE, MMMM d â€¢ h:mm a' }}
            </span>
          </div>

          @if (item.item.daysAfterPreviousAction) {
          <p class="text-xs text-gray-400 mt-1">
            {{ item.item.daysAfterPreviousAction }}
            {{ 'timeline.remainingDays' | translate }}
          </p>
          }
        </div>
      </div>

      <!-- user card -->
      <div>
        <app-identify-user
          [userAvatar]="item.item.profilePicURL"
          [userName]="item.item.actionByNameEn"
          [userRole]="getUserTranslatedRole(item.item.actorRole)"
        >
        </app-identify-user>
      </div>

      <!-- Action -->
      <div>
        <p class="text-sm text-gray-600">
          {{ 'timeline.action' | translate }}
        </p>
        <span class="text-sm font-medium text-gray-900">
          {{ getUserTranslatedAction(item.item) }}
        </span>
      </div>

      @if (item.item.comments?.length > 0) {
      <p-divider></p-divider>
      }
    </div>

  </ng-template>
</app-timeline>